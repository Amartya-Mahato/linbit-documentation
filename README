NOTES FOR DRBD DOCUMENTATION MAINTAINERS

This is the public DRBD documentation repository. It contains the DRBD
User's Guide and may, in the future, contain other documents
describing DRBD.


BUILDING THE DOCS (without DRBD man pages)
==========================================

In order to build the documentation, you will require the following
toolchain:

 * GNU make,
 * xsltproc,
 * the docbook-xsl stylesheet collection,
 * the sgml2xml utility for converting DRBD's man pages into XML,
 * mathmlsvg,
 * the "Computer Modern" font,
 * the Inkscape SVG editor/renderer.

If you are working on a reasonably recent Debian or Ubuntu release,
all of the above may be installed using the following command:

apt-get install make xsltproc docbook-xsl sp \
  latex-xft-fonts libgtkmathview-bin inkscape

Initiating a build run amounts to issuing "make" in the top-level
documentation directory. This will generate a number of PNG and SVG
graphics and HTML documents.


BUILDING THE DOCS (including DRBD man pages)
============================================

If you want to pull DRBD's manual pages into the documentation, there
is an additional prerequisite. You will need the latest DRBD source
code. To do so, either download and unpack a DRBD source tarball from
http://oss.linbit.com/drbd, or create a git checkout of the latest
sources:

git clone git://git.linbit.com/drbd-8.3

Usually, you would have that checkout in the same directory as you
have your checkout of the drbd-documentation.

Then, when building the documentation, instead of just "make", issue

make DRBD=<path-to-drbd-source-dir>

NOTE: As long as you do not issue a "make clean", you do not need
  to pass the DRBD=<path> argument to subsequent invocations of make.


MODIFYING AND MAINTAINING THE DOCS
==================================

In order to modify the documentation, the following additional tools
are required or highly recommended:

 * A validating XML editor such as Emacs with psgml,
 * a local copy of the DocBook XML DTD,
 * xmllint,
 * the git version control system.

Again, here is your command if you want to install all of this on
Debian or Ubuntu:

apt-get install emacs psgml docbook-xml \
  libxml2-utils git-core


CHECKING OUT THE DOCUMENTATION SOURCES
======================================

The documentation sources live in the public DRBD git repository at
git.linbit.com. You check them out using the following git command:

git clone git://git.linbit.com/drbd-documentation

This will create a local copy of the documentation sources in a
subdirectory named "drbd-documentation" which git automatically
creates in your current working directory. Be sure to frequently
update your documentation sources with the following commands:

cd drbd-documentation
git pull

When you have made changes, please commit them in your local
checkout. Group changes that "logically" belong together in one
commit, and be sure to include an informative commit message:

git add <files you wish to include in your commit>
git commit


SUBMITTING DOCUMENTATION PATCHES
================================

If you modify the documentation, please subscribe to the drbd-dev
mailing list at http://lists.linbit.com/listinfo/drbd-dev and start
sending patches to drbd-dev@lists.linbit.com.

Please submit patches in a format that makes it easy for us to apply
them to the repository:

git pull
git format-patch origin
git send-email --to=drbd-dev@lists.linbit.com *.patch
